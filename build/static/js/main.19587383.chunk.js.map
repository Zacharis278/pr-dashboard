{"version":3,"sources":["components/App.jsx","index.js"],"names":["Review","props","icon","state","className","src","author","avatarUrl","alt","login","PullRequest","statusClass","pullRequest","value","status","commits","edges","node","commit","moment","updatedAt","fromNow","title","repository","name","reviews","map","review","App","loaded","error","pullRequests","this","fetchData","setInterval","forEach","date","existingReview","isBefore","Object","values","axios","get","then","result","data","search","pr","resolveReviews","setState","err","console","log","status_bar","message","i","key","Component","ReactDOM","render","document","getElementById"],"mappings":"wUAMA,SAASA,EAAOC,GACZ,IAAIC,EAQJ,OANIA,EADgB,aAAhBD,EAAME,MACC,WACc,sBAAhBF,EAAME,MACJ,WAEA,kBAGP,yBAAKC,UAAU,UACX,yBAAKA,UAAU,gBAAgBC,IAAKJ,EAAMK,OAAOC,UAAWC,IAAKP,EAAMK,OAAOG,QAC9E,uBAAGL,UAAS,aAAQF,EAAR,mBAKxB,SAASQ,EAAYT,GACjB,IAEIU,EAFEC,EAAcX,EAAMY,MACpBC,EAASF,EAAYG,QAAQC,MAAQJ,EAAYG,QAAQC,MAAM,GAAGC,KAAKC,OAAOJ,OAAOX,MAAQ,KAanG,OAVIQ,EADW,YAAXG,EACc,iBACI,YAAXA,EACO,iBACI,YAAXA,EACO,iBAGA,iBAId,yBAAKV,UAAS,uBAAkBO,IAC5B,yBAAKP,UAAU,gBAAgBC,IAAKO,EAAYN,OAAOC,UAAWC,IAAKI,EAAYN,OAAOG,QAC1F,yBAAKL,UAAU,aACX,2BAAG,uCACH,uBAAGA,UAAU,eAAee,IAAOP,EAAYQ,WAAWC,YAE9D,wBAAIjB,UAAU,SAASQ,EAAYU,OACnC,yBAAKlB,UAAU,WACX,yBAAKA,UAAU,aAAaQ,EAAYW,WAAWC,MAClDZ,EAAYa,QAAQT,MAAMU,IAAI,SAACC,GAC5B,OAAO,kBAAC3B,EAAD,CAAQM,OAAQqB,EAAOV,KAAKX,OAAQH,MAAOwB,EAAOV,KAAKd,Y,IAoFnEyB,E,YA3EX,WAAY3B,GAAQ,IAAD,8BACf,4CAAMA,KACDE,MAAQ,CACT0B,QAAQ,EACRC,MAAO,KACPC,aAAc,IALH,E,iFASE,IAAD,OAChBC,KAAKC,YACLC,YAAY,kBAAM,EAAKD,aAAa,Q,qCAGzBrB,GACX,IAAIa,EAAU,GACdb,EAAYa,QAAQT,MAAMmB,QAAQ,SAAAR,GAC9B,IAAMrB,EAASqB,EAAOV,KAAKX,OAAOG,MAC5B2B,EAAOjB,IAAOQ,EAAOV,KAAKG,WAC1BiB,EAAiBZ,EAAQnB,GAC1B+B,IAAkBlB,IAAOkB,EAAepB,KAAKG,WAAWkB,SAASF,KAClEX,EAAQnB,GAAUqB,KAG1Bf,EAAYa,QAAQT,MAAQuB,OAAOC,OAAOf,K,kCAGjC,IAAD,OACRgB,IAAMC,IAAI,WAAWC,KAAK,SAACC,GACvB,IACI,IAAIb,EAAea,EAAOC,KAAKA,KAAKC,OAAO9B,MAC3Ce,EAAaI,QAAQ,SAAAY,GACjB,EAAKC,eAAeD,EAAG9B,QAE3B,EAAKgC,SAAS,CACVpB,QAAQ,EACRC,MAAO,KACPC,aAAcA,IAEpB,MAAMmB,GACJ,EAAKD,SAAS,CACVpB,QAAQ,EACRC,MAAOoB,MAIhB,SAACA,GACAC,QAAQC,IAAIF,GACZ,EAAKD,SAAS,CACVpB,QAAQ,EACRC,MAAOoB,Q,+BAKT,IAAD,EACmClB,KAAK7B,MAArC0B,EADH,EACGA,OAAQC,EADX,EACWA,MAAOC,EADlB,EACkBA,aAEnBsB,EAAa,KAMjB,OALIvB,EACAuB,EAAa,yBAAKjD,UAAU,oBAAf,UAA0C0B,EAAMwB,SACrDzB,IACRwB,EAAa,yBAAKjD,UAAU,mBAAf,eAGb,6BACKiD,EACAtB,EAAaL,IAAI,SAACqB,EAAGQ,GAClB,OAAO,kBAAC7C,EAAD,CAAa8C,IAAKD,EAAG1C,MAAOkC,EAAG9B,c,GAtExCwC,aCnDlBC,IAASC,OAAO,kBAAC,EAAD,MAASC,SAASC,eAAe,W","file":"static/js/main.19587383.chunk.js","sourcesContent":["import React, { Component } from 'react';\nimport axios from 'axios'\nimport moment from 'moment'\nimport '../assets/App.css'\n\n\nfunction Review(props) {\n    var icon;\n    if (props.state === 'APPROVED')\n        icon = 'fa-check'\n    else if (props.state === 'CHANGES_REQUESTED')\n        icon = 'fa-times'\n    else\n        icon = 'fa-commenting-o'\n\n    return (\n        <div className=\"review\">\n            <img className=\"review-avatar\" src={props.author.avatarUrl} alt={props.author.login}></img>\n            <i className={`fa ${icon} review-icon`}></i>\n        </div>\n    )\n}\n\nfunction PullRequest(props) {\n    const pullRequest = props.value\n    const status = pullRequest.commits.edges ? pullRequest.commits.edges[0].node.commit.status.state : null;\n    var statusClass;\n    if (status === 'SUCCESS') {\n        statusClass = 'status-success'\n    } else if (status === 'FAILURE') {\n        statusClass = 'status-failure'\n    } else if (status === 'PENDING') {\n        statusClass = 'status-pending'\n    }\n    else {\n        statusClass = 'status-unknown'\n    }\n\n    return (\n        <div className={`pr-container ${statusClass}`}>\n            <img className=\"author-avatar\" src={pullRequest.author.avatarUrl} alt={pullRequest.author.login}></img>\n            <div className=\"date-info\">\n                <p><b>Updated</b></p>\n                <p className=\"dateUpdated\">{moment(pullRequest.updatedAt).fromNow()}</p>\n            </div>\n            <h2 className=\"title\">{pullRequest.title}</h2>\n            <div className=\"details\">\n                <div className=\"repo-name\">{pullRequest.repository.name}</div>\n                {pullRequest.reviews.edges.map((review) => {\n                    return <Review author={review.node.author} state={review.node.state}></Review>\n                })}\n            </div>\n        </div>\n    )\n}\n\nclass App extends Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            loaded: false,\n            error: null,\n            pullRequests: [],\n        }\n    }\n\n    componentDidMount() {\n        this.fetchData();\n        setInterval(() => this.fetchData(), 1000*60*2);\n    }\n\n    resolveReviews(pullRequest) {\n        var reviews = {}\n        pullRequest.reviews.edges.forEach(review => {\n            const author = review.node.author.login;\n            const date = moment(review.node.updatedAt);\n            const existingReview = reviews[author]\n            if (!existingReview || moment(existingReview.node.updatedAt).isBefore(date)) {\n                reviews[author] = review;\n            }\n        })\n        pullRequest.reviews.edges = Object.values(reviews);\n    }\n\n    fetchData() {\n        axios.get('/query/').then((result) => {\n            try {\n                var pullRequests = result.data.data.search.edges;\n                pullRequests.forEach(pr => {\n                    this.resolveReviews(pr.node)\n                });\n                this.setState({\n                    loaded: true,\n                    error: null,\n                    pullRequests: pullRequests,\n                })\n            } catch(err) {\n                this.setState({\n                    loaded: true,\n                    error: err,\n                });\n            }\n            \n        }, (err) => {\n            console.log(err);\n            this.setState({\n                loaded: true,\n                error: err,\n            });\n        });\n    }\n\n    render() {\n        const { loaded, error, pullRequests } = this.state;\n       \n        let status_bar = null;\n        if (error) {\n            status_bar = <div className=\"status-bar error\">Error: {error.message}</div>\n        } else if (!loaded) {\n            status_bar = <div className=\"status-bar info\">Loading...</div>\n        }\n        return (\n            <div>\n                {status_bar} \n                {pullRequests.map((pr,i) => {\n                    return <PullRequest key={i} value={pr.node}></PullRequest>\n                })}\n            </div>\n        )\n    }\n}\n\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './assets/index.css';\nimport App from './components/App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}